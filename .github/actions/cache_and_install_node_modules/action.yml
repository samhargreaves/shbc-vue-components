name: "Cache and install node modules"
description: "This action will install and cache node modules"

runs:
    using: "composite"
    steps:
        - name: Use Node.js 20.x
          uses: actions/setup-node@v4
          with:
              node-version: 20.x

        - name: Cache Node Modules
          id: cache-node-modules
          uses: actions/cache@v4
          with:
              path: ./node_modules
              key: npm-${{ hashFiles('package-lock.json') }}

        - name: Install NPM
          shell: bash
          if: steps.cache-node-modules.outputs.cache-hit != 'true'
          run: npm ci --loglevel=error --no-progress --legacy-peer-deps
